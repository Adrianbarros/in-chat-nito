(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){},43:function(e,t,n){e.exports=n(87)},50:function(e,t,n){},83:function(e,t){},86:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(10),o=n.n(r),c=n(25),i=n(41),u=n(11),l=n.n(u),m=n(24),h=n(5),f=n(6),g=n(8),d=n(7),v=n(9),p=n(1),E=n.n(p),b=(n(50),function(e){return s.a.createElement("div",{className:"login"},s.a.createElement("form",{onSubmit:e.getUsername},s.a.createElement("h4",null,"Login"),s.a.createElement("input",{id:"login_input",type:"text",name:"name",className:"login-button",placeholder:"Username..."}),s.a.createElement("button",{type:"submit",id:"getData",className:"btn"},"Submit"),s.a.createElement("p",{id:"login_error"})),s.a.createElement("form",{className:"SignUponSubmit",onSubmit:e.createUsername},s.a.createElement("h4",null,"Sign Up"),s.a.createElement("input",{id:"login_input",type:"text",name:"new_username",className:"login-button",placeholder:"Enter New Username"}),s.a.createElement("button",{id:"getData",className:"SignUpbtn"},"Submit"),s.a.createElement("p",{id:"signup_error"})))}),y=n(2),S=n.n(y);var O=function(e){return s.a.createElement("div",null,s.a.createElement("h2",null,"Here are the courses you are enrolled in: "),s.a.createElement("div",{className:"courses_sec"},s.a.createElement("center",null,s.a.createElement(S.a,{className:"courses_btn",onClick:function(){e.switchToChat()}},"Web Development ")," "),"\xa0\xa0\xa0",s.a.createElement("center",null,s.a.createElement(S.a,{className:"courses_btn",variant:"primary",size:"lg"},"Computer Architecture ")," "),"\xa0\xa0\xa0",s.a.createElement("center",null,s.a.createElement(S.a,{className:"courses_btn",variant:"primary",size:"lg"},"Spanish ")," "),"\xa0\xa0\xa0",s.a.createElement("center",null,s.a.createElement(S.a,{className:"courses_btn",variant:"primary",size:"lg"},"Game Design ")," "),"\xa0\xa0\xa0",s.a.createElement("center",null,s.a.createElement(S.a,{className:"courses_btn",variant:"primary",size:"lg"},"Music History ")," ")))},j=function(e){return s.a.createElement("form",{onSubmit:e.logOut},s.a.createElement("button",{id:"log-btn"},"Logout"))},C=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(g.a)(this,Object(d.a)(t).call(this,e))).state={text:""},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t={from:this.props.name,text:this.state.text};this.props.onMessageSubmit(t),this.setState({text:""})}},{key:"handleChange",value:function(e){this.setState({text:e.target.value})}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},s.a.createElement("input",{onChange:function(t){return e.handleChange(t)},value:this.state.text,placeholder:"Message"}))}}]),t}(a.Component),k=function(e){return s.a.createElement("div",{className:E.a.Message+(e.from===e.name?" "+E.a.MessageRight:"")},s.a.createElement("strong",null,e.last===e.from?"":e.from===e.name?"You":e.from),s.a.createElement("span",{className:E.a.Cloud+(e.from===e.name?" "+E.a.CloudRight:"")},e.text))},w=function(e){function t(e){return Object(h.a)(this,t),Object(g.a)(this,Object(d.a)(t).call(this,e))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentWillUpdate",value:function(){var e=o.a.findDOMNode(this);this.shouldScrollBottom=e.scrollTop+e.offsetHeight===e.scrollHeight}},{key:"componentDidUpdate",value:function(){if(this.shouldScrollBottom){var e=o.a.findDOMNode(this);e.scrollTop=e.scrollHeight}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:E.a.MessageList},this.props.messages.map(function(t,n){return s.a.createElement(k,{key:n,from:t.from,text:t.text,name:e.props.name,last:n>0?e.props.messages[n-1].from:""})}))}}]),t}(s.a.Component),N=n(42),U=n.n(N)()("/"),x=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(g.a)(this,Object(d.a)(t).call(this,e))).getUsername=function(){var e=Object(m.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=t.target.elements.name.value,console.log(a),fetch("/login/".concat(a),{method:"GET",header:a}).then(function(e){if(console.log(e.status),404===e.status){document.getElementById("login_error").innerHTML="Error: no user found"}200===e.status&&(n.setState({name:a}),fetch("/courses").then(function(e){return e.json()}).then(function(e){return n.setState({courses:e})}).then(function(e){return console.log(n.state.courses)}))});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.createUsername=function(){var e=Object(m.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=t.target.elements.new_username.value,console.log(a),fetch("/signup/".concat(a),{method:"GET",header:a}).then(function(e){if(console.log(e.status),404===e.status){document.getElementById("signup_error").innerHTML="Error: Username already exists."}if(200===e.status){n.setState({name:a}),fetch("/courses").then(function(e){return e.json()}).then(function(e){return n.setState({courses:e})}).then(function(e){return console.log(n.state.courses)})}});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.logOut=function(e){e.preventDefault(),n.setState({name:void 0,courses:[],activeChat:!1})},n.switchToChat=function(e){n.setState({activeChat:!0})},n.state=Object(i.a)({name:void 0,activeChat:!1,users:[],courses:[],messages:[],text:""},"name",""),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;U.on("message",function(t){return e.messageReceive(t)}),U.on("update",function(t){var n=t.users;return e.chatUpdate(n)})}},{key:"messageReceive",value:function(e){var t=[].concat(Object(c.a)(this.state.messages),[e]);this.setState({messages:t})}},{key:"chatUpdate",value:function(e){this.setState({users:e})}},{key:"handleUserSubmit",value:function(e){e&&(this.setState({name:e}),U.emit("join",e))}},{key:"handleMessageSubmit",value:function(e){if(e.text){var t=[].concat(Object(c.a)(this.state.messages),[e]);this.setState({messages:t}),U.emit("message",e)}}},{key:"renderHomePage",value:function(){return s.a.createElement("div",null,s.a.createElement(b,{getUsername:this.getUsername,createUsername:this.createUsername}))}},{key:"renderChat",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("h1",null,"Chat Page"),s.a.createElement(j,{logOut:this.logOut}),s.a.createElement("div",{className:!0},s.a.createElement(w,{messages:this.state.messages,name:this.state.name,last:this.state.messages[this.state.messages.length-2]}),s.a.createElement(C,{onMessageSubmit:function(t){return e.handleMessageSubmit(t)},name:this.state.name})))}},{key:"renderCoursePage",value:function(){return s.a.createElement("div",null,s.a.createElement(j,{logOut:this.logOut}),s.a.createElement(O,{switchToChat:this.switchToChat,jinfo:this.state.users,courses:this.state.courses}))}},{key:"render",value:function(){return void 0===this.state.name&&!1===this.state.activeChat?this.renderHomePage():void 0!==this.state.name&&!1===this.state.activeChat?this.renderCoursePage():this.renderChat()}}]),t}(s.a.Component);n(86),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,1,2]]]);
//# sourceMappingURL=main.cbc91973.chunk.js.map